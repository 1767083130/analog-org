/*
Copyright 2012, KISSY UI Library v1.30rc
MIT Licensed
build time: Sep 12 15:30
*/
KISSY.add("tabs/bar",function(c,a){var b=a.extend({createDom:function(){this.get("el").attr("role","tablist")},handleKeyEventInternal:function(b){var a=this.get("selectedTab"),b=this.getNextItemByKeyEventInternal(b,a);if(c.isBoolean(b))return b;b.set("selected",!0);return!0},renderUI:function(){var b=this,a=b.get("children");c.each(a,function(a){a.get("selected")&&b.set("selectedTab",a)})},_uiSetSelectedTab:function(b,a){var c;b&&(a&&(c=a.prevVal)&&c.set("selected",!1),b.set("selected",!0))},_uiSetHighlightedItem:function(){b.superclass._uiSetHighlightedItem.apply(this,
arguments);"mouse"==this.get("changeType")&&this._uiSetSelectedTab.apply(this,arguments)},bindUI:function(){var b=this;b.on("afterSelectedChange",function(a){a.newVal&&a.target.isTabsTab&&b.set("selectedTab",a.target)})}},{ATTRS:{selectedTab:{},changeType:{value:"click"}}},{xclass:"tabs-bar",priority:30});b.changeType={CLICK:"click",MOUSE:"mouse"};return b},{requires:["toolbar"]});
KISSY.add("tabs/body",function(c,a){return a.Container.extend({renderUI:function(){var b=this,a=b.get("children");c.each(a,function(a){a.get("selected")&&b.set("selectedPanel",a)})},bindUI:function(){this.on("afterSelectedPanelChange",function(b){b.newVal&&(b.prevVal&&b.prevVal.set("selected",!1),b.newVal.set("selected",!0))})}},{ATTRS:{selectedPanel:{},allowTextSelection:{value:!0},focusable:{value:!1},handleMouseEvents:{value:!1},delegateChildren:{value:!1}}},{xclass:"tabs-body"})},{requires:["component"]});
KISSY.add("tabs/panel-render",function(c,a){return a.Render.extend({createDom:function(){this.get("el").attr("role","tabpanel")},_uiSetSelected:function(b){var a=this.get("el");a[b?"addClass":"removeClass"](this.get("selectedCls"));a.attr("aria-hidden",!b)}},{ATTRS:{selected:{value:!1},selectedCls:{valueFn:function(){return this.get("prefixCls")+"tabs-panel-selected"}}},HTML_PARSER:{selected:function(b){return b.hasClass(this.get("selectedCls"))}}},{xclass:"tabs-panel"})},{requires:["component"]});
KISSY.add("tabs/panel",function(c,a,b){return a.Controller.extend({},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},selectedCls:{view:1},xrender:{value:b}}},{xclass:"tabs-panel"})},{requires:["component","./panel-render"]});
KISSY.add("tabs/render",function(c,a){return a.Render.extend({_uiSetBarOrientation:function(b){this.get("el").removeClass(this.getCssClassWithPrefix("tabs-top tabs-bottom tabs-left tabs-right")).addClass(this.getCssClassWithPrefix("tabs-"+b))}},{ATTRS:{barOrientation:{value:"top"}},HTML_PARSER:{barOrientation:function(b){return(b=b[0].className.match(/tabs-(top|bottom|left|right)\b/))&&b[1]||"top"}}})},{requires:["component"]});
KISSY.add("tabs/tab-render",function(c,a){return a.Render.extend({createDom:function(){this.get("el").attr("role","tab")},_uiSetSelected:function(b){var a=this.get("el");a[b?"addClass":"removeClass"](this.get("selectedCls"));a.attr("aria-selected",!!b)}},{ATTRS:{selected:{value:!1},selectedCls:{valueFn:function(){return this.get("prefixCls")+"tabs-tab-selected"}}},HTML_PARSER:{selected:function(b){return b.hasClass(this.get("selectedCls"))}}},{xclass:"tabs-tab"})},{requires:["button"]});
KISSY.add("tabs/tab",function(c,a,b){return a.extend({isTabsTab:!0,bindUI:function(){this.publish("afterSelectedChange",{bubbles:1});this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},selectedCls:{view:1},xrender:{value:b}}},{xclass:"tabs-tab",priority:30})},{requires:["button","./tab-render"]});
KISSY.add("tabs",function(c,a,b,f,e,l,m){e=a.Controller.extend({initializer:function(){var b,a,d=this.get("tabSelectedCls"),j=this.get("panelSelectedCls"),g,k,e={xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},h={xclass:"tabs-body",children:[]},i=e.children,f=h.children;(a=this.get("items"))&&c.each(a,function(a){b=b||a.selected;i.push(g={xclass:"tabs-tab",content:a.title,selected:a.selected});f.push(k={xclass:"tabs-panel",content:a.content,selected:a.selected});d&&(g.selectedCls=
d);j&&(k.selectedCls=j)});!b&&i.length&&(i[0].selected=!0,f[0].selected=!0);this.set("bar",e);this.set("body",h)},addItem:function(a,b){var d=this.get("bar"),c,g;c=this.get("tabSelectedCls");var e=this.get("panelSelectedCls"),f,h=this.get("body");f={xclass:"tabs-tab",content:a.title};g={xclass:"tabs-panel",content:a.content};c&&(f.selectedCls=c);e&&(g.selectedCls=e);c=d.addChild(f,b);g=h.addChild(g,b);a.selected&&(d.set("selectedTab",c),h.set("selectedPanel",g));return this},removeItemAt:function(a,
b){var d=this.get("bar"),c=d.get("children"),e=d.getChildAt(a),f=this.get("body");e.get("selected")&&(1==c.length?d.set("selectedTab",null):0==a?d.set("selectedTab",d.getChildAt(a+1)):d.set("selectedTab",d.getChildAt(a-1)));d.removeChild(d.getChildAt(a),b);f.removeChild(f.getChildAt(a),b);return this},removeItemByTab:function(a){return this.removeItemAt(c.indexOf(a,this.get("bar").get("children")))},removeItemByPanel:function(a){return this.removeItemAt(c.indexOf(a,this.get("body").get("children")))},
getSelectedTab:function(){var a=this.get("bar"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},getSelectedPanel:function(){var a=this.get("body"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=
a,!1});return b},setSelectedTab:function(a){var b=this.get("bar"),d=this.get("body");b.set("selectedTab",a);d.set("selectedPanel",this.getPanelAt(c.indexOf(a,b.get("children"))));return this},setSelectedPanel:function(a){var b=this.get("bar"),d=this.get("body");b.set("selectedPanel",a);d.set("selectedTab",this.getTabAt(c.indexOf(a,d.get("children"))));return this},renderUI:function(){var a=this.get("barOrientation"),b=this.get("el"),c=this.get("body"),e=this.get("bar");e.set("render",b);c.set("render",
b);"bottom"==a?(c.render(),e.render()):(e.render(),c.render())},decorateInternal:function(a){var c=this.get("prefixCls"),d=a.children("."+c+"tabs-bar"),e=a.children("."+c+"tabs-body");this.set("el",a);this.set("bar",new b({srcNode:d,prefixCls:c}));this.set("body",new f({srcNode:e,prefixCls:c}))},bindUI:function(){var a=this;a.get("body");a.get("bar").on("afterSelectedTabChange",function(b){a.setSelectedTab(b.newVal)})}},{ATTRS:{items:{},changeType:{},tabSelectedCls:{},panelSelectedCls:{},handleMouseEvents:{value:!1},
allowTextSelection:{value:!0},focusable:{value:!1},bar:{setter:function(b){if(!(b instanceof a.Controller))return a.create(b)},valueFn:function(){return a.create({xclass:"tabs-bar",prefixCls:this.get("prefixCls")})}},body:{setter:function(b){if(!(b instanceof a.Controller))return a.create(b)},valueFn:function(){return a.create({xclass:"tabs-body",prefixCls:this.get("prefixCls")})}},barOrientation:{view:1},xrender:{value:m}}},{xclass:"tabs"});e.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};
e.Bar=b;e.Body=f;e.Panel=l;return e},{requires:"component,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
