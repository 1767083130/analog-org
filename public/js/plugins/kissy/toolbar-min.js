/*
Copyright 2012, KISSY UI Library v1.30rc
MIT Licensed
build time: Sep 12 15:30
*/
KISSY.add("toolbar",function(f,i,j,m,g){function d(a,b,c){var c=c.get("children"),e=0,d=c.length;if(a==g&&(a=1==b?0:d-1,!c[a].get("disabled")))return c[a];do e++,a=(a+d+b)%d;while(e<d&&c[a].get("disabled"));return e!=d?c[a]:null}function k(a){a.target!=this&&(a.newVal?this.set("expandedItem",null):this.set("expandedItem",a.target))}function l(a){var b,c=a.target;if(c!=this)if(a.newVal){if(this.set("highlightedItem",c),(b=this.get("expandedItem"))&&b.hasAttr("collapsed")&&b!=c)b.set("collapsed",!0),
c.set("collapsed",!1)}else this.set("highlightedItem",null)}var e=j.KeyCodes,h=i.Container.extend({addChild:function(){var a=h.superclass.addChild.apply(this,arguments),b=a;b.set("handleMouseEvents",!1);b.set("focusable",!1);b.publish("afterCollapsedChange afterHighlightedChange",{bubbles:1});return a},createDom:function(){this.get("el").attr("role","toolbar")},_uiSetHighlightedItem:function(a){var b,c=this.get("el");a?(b=a.get("el"),(a=b.attr("id"))||b.attr("id",a=f.guid("ks-toolbar-item")),c.attr("aria-activedescendant",
a)):c.attr("aria-activedescendant","")},bindUI:function(){this.on("afterCollapsedChange",k,this);this.on("afterHighlightedChange",l,this)},handleBlur:function(){var a,b;(b=this.get("expandedItem"))&&b.set("collapsed",!0);(a=this.get("highlightedItem"))&&a.set("highlighted",!1)},getNextItemByKeyEventInternal:function(a,b){this.get("orientation");var c=this.get("children"),c=b&&f.indexOf(b,c);if(b&&b.handleKeyEventInternal(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case e.ESC:return this.getKeyEventTarget().fire("blur"),
!0;case e.HOME:b=d(g,1,this);break;case e.END:b=d(g,-1,this);break;case e.UP:b=d(c,-1,this);break;case e.LEFT:b=d(c,-1,this);break;case e.DOWN:b=d(c,1,this);break;case e.RIGHT:b=d(c,1,this);break;default:return!1}return b},handleKeyEventInternal:function(a){var b=this.get("highlightedItem"),a=this.getNextItemByKeyEventInternal(a,b);if(f.isBoolean(a))return a;b&&b.set("highlighted",!1);a&&a.set("highlighted",!0);return!0}},{ATTRS:{highlightedItem:{},expandedItem:{}}},{xclass:"toolbar",priority:10});
return h},{requires:["component","node"]});
