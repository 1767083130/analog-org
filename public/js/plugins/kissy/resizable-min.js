/*
Copyright 2012, KISSY UI Library v1.30rc
MIT Licensed
build time: Sep 12 15:29
*/
KISSY.add("resizable",function(n,f,t,g,u){function o(a){var a=a.newVal,h=this.dds,e=this.get("prefixCls")+v,d=this.get("node");this.destroy();for(b=0;b<a.length;b++){var c=a[b],l=p("<div class='"+e+" "+e+"-"+c+"'></div>").prependTo(d,u),c=h[c]=new w({node:l,cursor:null});c.on("drag",x,this);c.on("dragstart",y,this)}}function y(){var a=this.get("node");this._width=a.width();this._top=parseInt(a.css("top"));this._left=parseInt(a.css("left"));this._height=a.height()}function x(a){var h=this.get("node"),
e=a.target,d;a:{d=this.dds;for(var c in d)if(d.hasOwnProperty(c)&&d[c]==e){d=c;break a}d=0}c=this._width;var l=this._height,m=this.get("minWidth"),i=this.get("maxWidth"),z=this.get("minHeight"),f=this.get("maxHeight"),g=a.top-e.get("startNodePos").top,a=a.left-e.get("startNodePos").left,a=j[d](m,i,z,f,this._top,this._left,c,l,g,a);for(b=0;b<q.length;b++)a[b]&&h.css(q[b],a[b])}function r(a){var h=a.newVal;n.each(this.dds,function(a){a.set("disabled",h)})}function k(a){var h,b;k.superclass.constructor.apply(this,
arguments);this.on("afterHandlersChange",o,this);this.on("afterDisabledChange",r,this);b=this.get("node");this.dds={};"static"==b.css("position")&&b.css("position","relative");o.call(this,{newVal:this.get("handlers")});(h=this.get("disabled"))&&r.call(this,{newVal:h})}var p=f.all,b,w=g.Draggable,v="resizable-handler",g=["l","r"],s=["t","b"],q=["width","height","top","left"],j={t:function(a,b,e,d,c,l,m,i,f){a=Math.min(Math.max(e,i-f),d);return[0,a,c+i-a,0]},b:function(a,b,e,d,c,f,m,i,g){return[0,Math.min(Math.max(e,
i+g),d),0,0]},r:function(a,b,e,d,c,f,g,i,j,k){return[Math.min(Math.max(a,g+k),b),0,0,0]},l:function(a,b,e,d,c,f,g,i,j,k){a=Math.min(Math.max(a,g-k),b);return[a,0,0,f+g-a]}};for(b=0;b<g.length;b++)for(f=0;f<s.length;f++)(function(a,h){j[a+h]=j[h+a]=function(){var e=j[a].apply(this,arguments),d=j[h].apply(this,arguments),c=[];for(b=0;b<e.length;b++)c[b]=e[b]||d[b];return c}})(g[b],s[f]);n.extend(k,t,{destroy:function(){var a=this.dds,b;for(b in a)a.hasOwnProperty(b)&&(a[b].destroy(),a[b].get("node").remove(),
delete a[b])}},{ATTRS:{node:{setter:function(a){return p(a)}},prefixCls:{value:"ks-"},disabled:{},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},maxHeight:{value:Number.MAX_VALUE},handlers:{value:[]}}});return k},{requires:["node","base","dd"]});
